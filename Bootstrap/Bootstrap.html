<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Juego Monty Hall</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #f4f4f4;
    }
    h1 {
      margin-top: 20px;
    }
    .puertas {
      display: flex;
      justify-content: center;
      margin: 20px;
      gap: 20px;
    }
    .puerta {
      width: 120px;
      height: 200px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .puerta:hover {
      transform: scale(1.05);
    }
    #mensaje, #estadisticas {
      margin: 20px;
      font-size: 18px;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Juego Monty Hall</h1>
  <div id="mensaje">Elige una puerta</div>
  <div class="puertas">
    <img id="door0" class="puerta" src="imgs/puerta.png" onclick="elegirPuerta(0)">
    <img id="door1" class="puerta" src="imgs/puerta.png" onclick="elegirPuerta(1)">
    <img id="door2" class="puerta" src="imgs/puerta.png" onclick="elegirPuerta(2)">
  </div>
  <div id="opciones"></div>
  <div id="estadisticas"></div>

  <script>
    // URLs de im√°genes (puedes cambiarlas si quieres otras)
    const IMG_PUERTA = "imgs/puerta.png"; // puerta cerrada
    const IMG_CABRA = "imgs/puerta.png"; // cabra
    const IMG_AUTO = "imgs/puerta.png";  // auto

    let premio, eleccionUsuario, puertaRevelada;
    let rondas = 0;
    let ganadasCambiando = 0, ganadasSinCambiar = 0;
    let jugadasCambiando = 0, jugadasSinCambiar = 0;

    function iniciarRonda() {
      premio = Math.floor(Math.random() * 3); // Puerta con premio
      eleccionUsuario = null;
      puertaRevelada = null;
      document.getElementById("mensaje").innerText = "Elige una puerta";
      document.getElementById("opciones").innerHTML = "";
      for (let i = 0; i < 3; i++) {
        document.getElementById("door" + i).src = IMG_PUERTA;
        document.getElementById("door" + i).style.pointerEvents = "auto";
      }
    }

    function elegirPuerta(puerta) {
      if (eleccionUsuario !== null) return; // Solo elegir una vez
      eleccionUsuario = puerta;

      // Revelar una puerta vac√≠a
      do {
        puertaRevelada = Math.floor(Math.random() * 3);
      } while (puertaRevelada === premio || puertaRevelada === eleccionUsuario);

      document.getElementById("door" + puertaRevelada).src = IMG_CABRA;
      document.getElementById("door" + puertaRevelada).style.pointerEvents = "none";

      document.getElementById("mensaje").innerText =
        `Has elegido la puerta ${puerta + 1}. Se abre la puerta ${puertaRevelada + 1} (cabra üêê). ¬øQuieres cambiar?`;

      document.getElementById("opciones").innerHTML = `
        <button onclick="resolver(true)">Cambiar</button>
        <button onclick="resolver(false)">No cambiar</button>
      `;
    }

    function resolver(cambiar) {
      let eleccionFinal = eleccionUsuario;
      if (cambiar) {
        // Cambia a la otra puerta que no se abri√≥
        for (let i = 0; i < 3; i++) {
          if (i !== eleccionUsuario && i !== puertaRevelada) {
            eleccionFinal = i;
          }
        }
      }

      let gano = eleccionFinal === premio;
      rondas++;

      if (cambiar) {
        jugadasCambiando++;
        if (gano) ganadasCambiando++;
      } else {
        jugadasSinCambiar++;
        if (gano) ganadasSinCambiar++;
      }

      // Mostrar el contenido de todas las puertas
      for (let i = 0; i < 3; i++) {
        if (i === premio) {
          document.getElementById("door" + i).src = IMG_AUTO;
        } else {
          document.getElementById("door" + i).src = IMG_CABRA;
        }
        document.getElementById("door" + i).style.pointerEvents = "none";
      }

      document.getElementById("mensaje").innerText =
        gano ? "¬°Ganaste el auto! üöóüéâ" : "Perdiste, era otra puerta üò¢";

      document.getElementById("opciones").innerHTML = "";

      if (rondas < 20) {
        setTimeout(iniciarRonda, 2500);
      } else {
        mostrarEstadisticas();
      }
    }

    function mostrarEstadisticas() {
      let porcentajeCambio = jugadasCambiando > 0 ? 
        (ganadasCambiando / jugadasCambiando * 100).toFixed(1) : 0;
      let porcentajeNoCambio = jugadasSinCambiar > 0 ?
        (ganadasSinCambiar / jugadasSinCambiar * 100).toFixed(1) : 0;

      document.getElementById("estadisticas").innerHTML = `
        <h2>Resultados despu√©s de 20 rondas:</h2>
        <p>Cuando cambiaste ganaste: ${porcentajeCambio}% (${ganadasCambiando}/${jugadasCambiando})</p>
        <p>Cuando no cambiaste ganaste: ${porcentajeNoCambio}% (${ganadasSinCambiar}/${jugadasSinCambiar})</p>
      `;
    }

    // Iniciar la primera ronda
    iniciarRonda();
  </script>
</body>
</html>
